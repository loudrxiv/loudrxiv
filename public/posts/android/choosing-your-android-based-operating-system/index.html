<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Choosing Your Android-Based Operating System | PrivSec - A practical approach to Privacy and Security</title><meta name=keywords content="Operating Systems,Android,Privacy,Security"><meta name=description content="Android is a secure operating system that has strong app sandboxing, Verified Boot (AVB), and a robust permission control system.
When you buy an Android phone, the device&rsquo;s default operating system often comes with invasive integration with apps and services that are not part of the Android Open-Source Project. An example of such is Google Play Services, which has irrevocable privileges to access your files, contacts storage, call logs, SMS messages, location, camera, microphone, hardware identifiers, and so on."><meta name=author content="Tommy"><link rel=canonical href=https://privsec.dev/posts/android/choosing-your-android-based-operating-system/><link crossorigin=anonymous href=/assets/css/stylesheet.c5277e43fde8b6dabe803dff75b3c935ba15f1a218d18c0bcbaba3460636ce74.css integrity="sha256-xSd+Q/3ottq+gD3/dbPJNboV8aIY0YwLy6ujRgY2znQ=" rel="preload stylesheet" as=style><noscript><link crossorigin=anonymous href=/css/includes/noscript.30127fa68e36d08f5dd7f9d4e717dac42e729b844672afd0fbcacb0d9e508595.css integrity="sha256-MBJ/po420I9d1/nU5xfaxC5ym4RGcq/Q+8rLDZ5QhZU=" rel="preload stylesheet" as=style></noscript><link rel=icon href=https://privsec.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://privsec.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://privsec.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://privsec.dev/apple-touch-icon.png><link rel=mask-icon href=https://privsec.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta property="og:title" content="Choosing Your Android-Based Operating System"><meta property="og:description" content="Android is a secure operating system that has strong app sandboxing, Verified Boot (AVB), and a robust permission control system.
When you buy an Android phone, the device&rsquo;s default operating system often comes with invasive integration with apps and services that are not part of the Android Open-Source Project. An example of such is Google Play Services, which has irrevocable privileges to access your files, contacts storage, call logs, SMS messages, location, camera, microphone, hardware identifiers, and so on."><meta property="og:type" content="article"><meta property="og:url" content="https://privsec.dev/posts/android/choosing-your-android-based-operating-system/"><meta property="og:image" content="https://privsec.dev/privsec.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-18T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-04T16:21:06-05:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://privsec.dev/privsec.png"><meta name=twitter:title content="Choosing Your Android-Based Operating System"><meta name=twitter:description content="Android is a secure operating system that has strong app sandboxing, Verified Boot (AVB), and a robust permission control system.
When you buy an Android phone, the device&rsquo;s default operating system often comes with invasive integration with apps and services that are not part of the Android Open-Source Project. An example of such is Google Play Services, which has irrevocable privileges to access your files, contacts storage, call logs, SMS messages, location, camera, microphone, hardware identifiers, and so on."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Categories","item":"https://privsec.dev/posts/"},{"@type":"ListItem","position":3,"name":"Android","item":"https://privsec.dev/posts/android/"},{"@type":"ListItem","position":4,"name":"Choosing Your Android-Based Operating System","item":"https://privsec.dev/posts/android/choosing-your-android-based-operating-system/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Choosing Your Android-Based Operating System","name":"Choosing Your Android-Based Operating System","description":"Android is a secure operating system that has strong app sandboxing, Verified Boot (AVB), and a robust permission control system.\nWhen you buy an Android phone, the device\u0026rsquo;s default operating system often comes with invasive integration with apps and services that are not part of the Android Open-Source Project. An example of such is Google Play Services, which has irrevocable privileges to access your files, contacts storage, call logs, SMS messages, location, camera, microphone, hardware identifiers, and so on.","keywords":["Operating Systems","Android","Privacy","Security"],"articleBody":"Android is a secure operating system that has strong app sandboxing, Verified Boot (AVB), and a robust permission control system.\nWhen you buy an Android phone, the deviceâ€™s default operating system often comes with invasive integration with apps and services that are not part of the Android Open-Source Project. An example of such is Google Play Services, which has irrevocable privileges to access your files, contacts storage, call logs, SMS messages, location, camera, microphone, hardware identifiers, and so on. These apps and services increase the attack surface of your device and are the source of various privacy concerns with Android.\nThis problem could be solved by using a custom Android-based operating system that does not come with such invasive integration. Unfortunately, many custom Android-based operating systems often violate the Android security model by not supporting critical security features such as AVB, rollback protection, firmware updates, and so on. Some of them also ship userdebug builds which expose root over ADB and require more permissive SELinux policies to accommodate debugging features, resulting in a further increased attack surface and weakened security model.\nWhen choosing a custom Android-based operating system, you should make sure that it upholds the Android security model. Ideally, the custom operating system should have substantial privacy and security improvements to justify adding yet another party to trust.\nBaseline Security Verified Boot Verified Boot is an important part of the Android security model. It provides protection against evil maid attacks, malware persistence, and ensures security updates cannot be downgraded with rollback protection.\nOn Android, only your data (inside of the /data partition) is encrypted, and the operating system files are left unencrypted. Verified Boot ensures the integrity of the operating system files, thereby preventing an adversary with physical access from tampering or installing malware on the device. In the unlikely case that malware is able to exploit other parts of the system and gain higher privileged access, Verified Boot will prevent and revert changes to the system partition upon rebooting the device.\nUnfortunately, OEMs are only obliged to support Verified Boot on their stock Android distribution. Only a few OEMs such as Google support custom AVB key enrollment on their devices. Additionally, some AOSP derivatives such as LineageOS or /e/ OS do not support Verified Boot even on hardware with Verified Boot support for third-party operating systems. These AOSP derivatives should be avoided at all cost.\nFirmware Updates Firmware updates are critical for maintaining security and without them your device cannot be secure. OEMs have support agreements with their partners to provide the closed-source components for a limited support period. These are detailed in the monthly Android Security Bulletins.\nOn a custom Android distribution, it is the responsibility of the operating system vendor to extract the firmware from the stock operating system, test it against their Android builds, then ship them to the user.\nUnfortunately, many custom Android distributions, including extremely popular ones like LineageOS and /e/ OS do not ship firmware updates for most of their supported device. Instead, they expect the user to keep track of stock OS updates, extract and flash the firmware themselves. Beyond the lack of testing, this is extremely burdensome and not feasible for most end users and is yet another reason to not use these distributions.\nPatch Levels As the Android Security Bulletins is updated every month, Android-Based operating systems are expected to apply all security fixes before the next bulletin update comes out. Beside extracting the firmware, testing it and shipping it to the end user as described above, the AOSP based system also need to be updated.\nThis is a particularly challenging thing to do, especially around the time of a new major Android release since there are a lot of changes. Sometimes, newer firmware versions require newer major versions of AOSP, and if the developer takes too long to update their base operating system to the next major AOSP version, they cannot ship firmware updates either, leaving users vulnerable.\nThis has happened to CalyxOS during the Android 11 to Android 12 transition. It took them 4 months to update to Android 12; and during those 4 months, they could not ship any firmware updates at all, leaving the user vulnerable during that time period.\nIt would be much better if you just stick to the stock operating system (which got updated to Android 12 shortly after the AOSP 12 release) instead of using a custom operating system which could not keep up with updates as described.\nChromium Webview Updates Android comes with a system webview, a component that many apps rely on to use as part of their activity layout. It effectively behaves like a minimal browser, opening random websites with arbitrary code the internet. Thus, it is very important that this component is consistently kept up to dater.\nSome Android-based operating systems, including ones like CalyxOS, often fall behind on security updates for this component. Particularly, this has gotten so bad that they actually fell behind for 3 months back in January 2022 and 2 months in June 2022. It is a good indication that these operating systems cannot keep up with security updates and should not be used.\nUser Builds As mentioned above, userdebug builds expose root over ADB and require more permissive SELinux policies to accommodate debugging features. userdebug builds violate the Android security model and are really only meant for developers to test out their android builds during development.\nEnd users should be using the production user builds, and any distributions that fail to deliver them like LineageOS or /e/ OS should be avoided.\nSELinux in Enforcing Mode SELinux is a critical part of the Android security model, having the Linux kernel enforcing confinement for all processes, including system processes running as root.\nIn order for a system to be secure, it must have SELinux in Enforcing mode, accompanied by fine-grained SELinux policies.\nUnfortunately, many custom Android-based operating system builds (especially unofficial LineageOS builds) disables SELinux or set it into Permissive mode. You can check whether SELinux is in enforcing mode or not by executing getenforce in the ADB shell (the expected output is Enforcing). You should avoid any Android-based operating system builds that do not have SELinux in enforcing mode at all cost.\nRecommended Android-Based Operating Systems Currently, I am only aware of two Android-based operating systems that should be used over the stock operating systems:\nGrapheneOS GrapheneOS is the only custom Android-based operating system you should buy a new phone for. It provides additional security hardening and privacy improvements over the stock operating system from Google. It has a hardened memory allocator, network and sensor permissions, and various other security feature. GrapheneOS also comes with full firmware updates and signed builds, so verified boot is fully supported. Here is a quick video demonstrating the network and sensors permissions:\n  For usability purposes, GrapheneOS supports Sandboxed Google Play, which runs Google Play Services fully sandboxed like any other regular app. This means you can take advantage of most Google Play Services, such as push notifications, while giving you full control over their permissions and access, and while containing them to a specific work profile or user profile of your choice. Most interestingly, the In-app Billing API, Google Play Games, Play Asset Delivery, FIDO2 all work exceptionally well. Most Advanced Protection Program features, except for Play Protect and restricted app installation, also work.\nBecause GrapheneOS does not grant any Google Apps and Services apart from the opt-in eSIM action app privileged access to the system, Play Protect cannot disable or uninstall known malicious applications when it detects them. As for restricted app installation, this feature is not that useful on stock operating system anyways, since it is bypassable with adb push.\nRecently, GrapheneOS has also added the Storage Scopes feature, allowing you to force apps that request broad storage access permission to function with scoped storage. With this new feature, you no longer have to grant certain apps access to all of your media or files to use them anymore. You can watch a video of Storage Scope in action here:\n  Currently, Google Pixel phones are the only devices that meet GrapheneOSâ€™s hardware security requirements.\nDivestOS DivestOS is a great aftermarket operating system for devices that have gone end-of-life or are near end-of-life. Note that this is a harm reduction project, ran by one developer on the best effort basis, and you should not buy a new device just to run DivestOS.\nBeing a soft-fork of LineageOS, DivestOS inherits many supported devices from LineageOS. It has signed builds, making it possible to have verified boot on some non-Pixel devices.\nIt comes with substantial hardening over AOSP. DivestOS has automated kernel vulnerability (CVE) patching, fewer proprietary blobs, a custom hosts file, and various security features ported from GrapheneOS. A non-exhaustive list of this includes:\n A hardened webview. Mulch comes with some patches from GrapheneOSâ€™s Vanadium browser and the Bromite project. It gets updated fairly quickly and do not fall behind nearly as much as Bromite. Kernel patches from GrapheneOS and enables all available kernel security features via defconfig hardening. All kernels newer than version 3.4 include full page sanitization and all ~22 Clang-compiled kernels have -ftrivial-auto-var-init=zero enabled. GrapheneOSâ€™s INTERNET and SENSORS permission toggle. Hardened memory allocator Secure Exec-Spawning Partial bionic hardening patchsets from GrapheneOS GrapheneOSâ€™s per-network full MAC randomization option on version 17.1 and higher Automatic reboot/Wi-Fi/Bluetooth timeout options  With that being said, DivestOS is not without its faults. The developer does not have all of the devices he is building for, and for a lot of them he simply publishes the builds blind without actually testing them. Firmware update support varies across devices. DivestOS also takes a very long time to update to a new major Android, and actually took longer than CalyxOS did as mentioned above. It does not tend to fall behind on Chromium updates like CalyxOS, however.\nAlso, please note that I am only recommending DivestOS here, and not any of its related apps. For instance, I would not recommend using Mull, since it is just a Firefox Android fork with better defaults and still inherits many security deficiencies from its upstream, including the lack of support for site isolation and isolatedProcess.\n","wordCount":"1699","inLanguage":"en","datePublished":"2022-07-18T00:00:00Z","dateModified":"2023-02-04T16:21:06-05:00","author":{"@type":"Person","name":"Tommy"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://privsec.dev/posts/android/choosing-your-android-based-operating-system/"},"publisher":{"@type":"Organization","name":"PrivSec - A practical approach to Privacy and Security","logo":{"@type":"ImageObject","url":"https://privsec.dev/favicon.ico"}}}</script></head><body class=dark id=top><script crossorigin=anonymous src=/assets/js/theme.b20f95bb4da41ef90a2610a557a7000b2649a3f47282ec571676da6fc0427200.js integrity="sha256-sg+Vu02kHvkKJhClV6cACyZJo/RyguxXFnbab8BCcgA="></script><header class=header><div id=progressBar></div><nav class=nav><div class=logo><a href=https://privsec.dev accesskey=h title="PrivSec (Alt + H)"><img src=https://privsec.dev/privsec.png alt aria-label=logo height=30>PrivSec</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><input id=hamburger-input type=checkbox></input>
<label id=hamburger-menu for=hamburger-input></label><div class=overlay></div><ul id=menu><li><a href=https://privsec.dev/posts/ title=Categories><span>Categories</span></a></li><li><a href=https://privsec.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://privsec.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://privsec.dev/resources title=Resources><span>Resources</span></a></li><li><a href=https://tommytran.io/tommy.asc title=PGP><span>PGP</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://tommytran.io/tommy.crt title=S/MIME><span>S/MIME</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://privsec.dev>Home</a>&nbsp;Â»&nbsp;<a href=https://privsec.dev/posts/>Categories</a>&nbsp;Â»&nbsp;<a href=https://privsec.dev/posts/android/>Android</a></div><h1 class=post-title>Choosing Your Android-Based Operating System</h1><div class=post-meta><span title='2022-07-18 00:00:00 +0000 UTC'>July 18, 2022</span>&nbsp;Â·&nbsp;8 min&nbsp;Â·&nbsp;1699 words&nbsp;Â·&nbsp;Tommy&nbsp;|&nbsp;<a href=https://github.com/PrivSec-dev/privsec.dev/blob/main/content/posts/android/Choosing%20Your%20Android-Based%20Operating%20System.md rel="noopener noreferrer">Suggest Changes</a></div><div class=post-meta><span title="2023-02-04 16:21:06 -0500 EST"><i>Last updated on February 4, 2023</i></span></div></header><div class="toc side"><details id=toc><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#baseline-security aria-label="Baseline Security">Baseline Security</a><ul><li><a href=#verified-boot aria-label="Verified Boot">Verified Boot</a></li><li><a href=#firmware-updates aria-label="Firmware Updates">Firmware Updates</a></li><li><a href=#patch-levels aria-label="Patch Levels">Patch Levels</a></li><li><a href=#chromium-webview-updates aria-label="Chromium Webview Updates">Chromium Webview Updates</a></li><li><a href=#user-builds aria-label="User Builds">User Builds</a></li><li><a href=#selinux-in-enforcing-mode aria-label="SELinux in Enforcing Mode">SELinux in Enforcing Mode</a></li></ul></li><li><a href=#recommended-android-based-operating-systems aria-label="Recommended Android-Based Operating Systems">Recommended Android-Based Operating Systems</a><ul><li><a href=#grapheneos aria-label=GrapheneOS>GrapheneOS</a></li><li><a href=#divestos aria-label=DivestOS>DivestOS</a></li></ul></li></ul></div></details></div><div class=post-content><p>Android is a secure operating system that has strong <a href=https://source.android.com/security/app-sandbox>app sandboxing</a>, <a href=https://source.android.com/security/verifiedboot>Verified Boot</a> (AVB), and a robust <a href=https://developer.android.com/guide/topics/permissions/overview>permission</a> control system.</p><p>When you buy an Android phone, the device&rsquo;s default operating system often comes with invasive integration with apps and services that are not part of the <a href=https://source.android.com/>Android Open-Source Project</a>. An example of such is Google Play Services, which has irrevocable privileges to access your files, contacts storage, call logs, SMS messages, location, camera, microphone, hardware identifiers, and so on. These apps and services increase the attack surface of your device and are the source of various privacy concerns with Android.</p><p>This problem could be solved by using a custom Android-based operating system that does not come with such invasive integration. Unfortunately, many custom Android-based operating systems often violate the Android security model by not supporting critical security features such as AVB, rollback protection, firmware updates, and so on. Some of them also ship <a href=https://source.android.com/setup/build/building#choose-a-target><code>userdebug</code></a> builds which expose root over <a href=https://developer.android.com/studio/command-line/adb>ADB</a> and require <a href="https://github.com/LineageOS/android_system_sepolicy/search?q=userdebug&type=code">more permissive</a> SELinux policies to accommodate debugging features, resulting in a further increased attack surface and weakened security model.</p><p>When choosing a custom Android-based operating system, you should make sure that it upholds the Android security model. Ideally, the custom operating system should have substantial privacy and security improvements to justify adding yet another party to trust.</p><h2 id=baseline-security>Baseline Security<a hidden class=anchor aria-hidden=true href=#baseline-security>#</a></h2><h3 id=verified-boot>Verified Boot<a hidden class=anchor aria-hidden=true href=#verified-boot>#</a></h3><p><img loading=lazy src=/images/verified-boot.png alt="Verified Boot"></p><p><a href=https://source.android.com/security/verifiedboot>Verified Boot</a> is an important part of the Android security model. It provides protection against <a href=https://en.wikipedia.org/wiki/Evil_maid_attack>evil maid</a> attacks, malware persistence, and ensures security updates cannot be downgraded with <a href=https://source.android.com/security/verifiedboot/verified-boot#rollback-protection>rollback protection</a>.</p><p>On Android, only your data (inside of the /data partition) is encrypted, and the operating system files are left unencrypted. Verified Boot ensures the integrity of the operating system files, thereby preventing an adversary with physical access from tampering or installing malware on the device. In the unlikely case that malware is able to exploit other parts of the system and gain higher privileged access, Verified Boot will prevent and revert changes to the system partition upon rebooting the device.</p><p>Unfortunately, OEMs are only obliged to support Verified Boot on their stock Android distribution. Only a few OEMs such as Google support custom AVB key enrollment on their devices. Additionally, some AOSP derivatives such as LineageOS or /e/ OS do not support Verified Boot even on hardware with Verified Boot support for third-party operating systems. These AOSP derivatives should be avoided at all cost.</p><h3 id=firmware-updates>Firmware Updates<a hidden class=anchor aria-hidden=true href=#firmware-updates>#</a></h3><p>Firmware updates are critical for maintaining security and without them your device cannot be secure. OEMs have support agreements with their partners to provide the closed-source components for a limited support period. These are detailed in the monthly <a href=https://source.android.com/security/bulletin>Android Security Bulletins</a>.</p><p>On a custom Android distribution, it is the responsibility of the operating system vendor to extract the firmware from the stock operating system, test it against their Android builds, then ship them to the user.</p><p>Unfortunately, many custom Android distributions, including extremely popular ones like LineageOS and /e/ OS do not ship firmware updates for most of their supported device. Instead, they expect the user to keep track of stock OS updates, extract and flash the firmware themselves. Beyond the lack of testing, this is extremely burdensome and not feasible for most end users and is yet another reason to not use these distributions.</p><h3 id=patch-levels>Patch Levels<a hidden class=anchor aria-hidden=true href=#patch-levels>#</a></h3><p>As the <a href=https://source.android.com/security/bulletin>Android Security Bulletins</a> is updated every month, Android-Based operating systems are expected to apply all security fixes before the next bulletin update comes out. Beside extracting the firmware, testing it and shipping it to the end user as described <a href=#firmware-updates>above</a>, the AOSP based system also need to be updated.</p><p>This is a particularly challenging thing to do, especially around the time of a new major Android release since there are a lot of changes. Sometimes, newer firmware versions require newer major versions of AOSP, and if the developer takes too long to update their base operating system to the next major AOSP version, they cannot ship firmware updates either, leaving users vulnerable.</p><p>This has happened to CalyxOS during the Android 11 to Android 12 transition. It took them <a href=https://github.com/privacyguides/privacyguides.org/pull/578#issue-1112002737>4 months</a> to update to Android 12; and during those 4 months, they could not ship any firmware updates at all, leaving the user vulnerable during that time period.</p><p>It would be much better if you just stick to the stock operating system (which got updated to Android 12 shortly after the AOSP 12 release) instead of using a custom operating system which could not keep up with updates as described.</p><h3 id=chromium-webview-updates>Chromium Webview Updates<a hidden class=anchor aria-hidden=true href=#chromium-webview-updates>#</a></h3><p>Android comes with a system <a href=https://developer.android.com/reference/android/webkit/WebView>webview</a>, a component that many apps rely on to use as part of their activity layout. It effectively behaves like a minimal browser, opening random websites with arbitrary code the internet. Thus, it is very important that this component is consistently kept up to dater.</p><p>Some Android-based operating systems, including ones like CalyxOS, often fall behind on security updates for this component. Particularly, this has gotten so bad that they actually fell behind for <a href=https://github.com/privacyguides/privacyguides.org/pull/548#issuecomment-1018245074>3 months</a> back in January 2022 and <a href=https://github.com/privacyguides/privacyguides.org/pull/1378>2 months</a> in June 2022. It is a good indication that these operating systems cannot keep up with security updates and should not be used.</p><h3 id=user-builds>User Builds<a hidden class=anchor aria-hidden=true href=#user-builds>#</a></h3><p>As mentioned <a href=/posts/os/choosing-your-android-based-operating-system/>above</a>, <code>userdebug</code> builds expose root over ADB and require more permissive SELinux policies to accommodate debugging features. <code>userdebug</code> builds violate the Android security model and are really only meant for developers to test out their android builds during development.</p><p>End users should be using the production <code>user</code> builds, and any distributions that fail to deliver them like LineageOS or /e/ OS should be avoided.</p><h3 id=selinux-in-enforcing-mode>SELinux in Enforcing Mode<a hidden class=anchor aria-hidden=true href=#selinux-in-enforcing-mode>#</a></h3><p><a href=https://source.android.com/security/selinux>SELinux</a> is a critical part of the Android security model, having the Linux kernel enforcing confinement for all processes, including system processes running as root.</p><p>In order for a system to be secure, it must have SELinux in Enforcing mode, accompanied by fine-grained SELinux policies.</p><p>Unfortunately, many custom Android-based operating system builds (especially unofficial LineageOS builds) disables SELinux or set it into Permissive mode. You can check whether SELinux is in enforcing mode or not by executing <code>getenforce</code> in the ADB shell (the expected output is <code>Enforcing</code>). You should avoid any Android-based operating system builds that do not have SELinux in enforcing mode at all cost.</p><p><img loading=lazy src=/images/adb-selinux.png alt="ADB SELinux"></p><h2 id=recommended-android-based-operating-systems>Recommended Android-Based Operating Systems<a hidden class=anchor aria-hidden=true href=#recommended-android-based-operating-systems>#</a></h2><p>Currently, I am only aware of two Android-based operating systems that should be used over the stock operating systems:</p><h3 id=grapheneos>GrapheneOS<a hidden class=anchor aria-hidden=true href=#grapheneos>#</a></h3><p><img loading=lazy src=/images/grapheneos-aurora.jpg alt="GrapheneOS Aurora"></p><p><a href=https://grapheneos.org>GrapheneOS</a> is the <strong>only</strong> custom Android-based operating system you should buy a new phone for. It provides additional <a href=https://en.wikipedia.org/wiki/Hardening_(computing)>security hardening</a> and privacy improvements over the stock operating system from Google. It has a <a href=https://github.com/GrapheneOS/hardened_malloc>hardened memory allocator</a>, network and sensor permissions, and various other <a href=https://grapheneos.org/features>security feature</a>. GrapheneOS also comes with full firmware updates and signed builds, so verified boot is fully supported. Here is a quick video demonstrating the network and sensors permissions:</p><div class=youtube-embed-div><iframe src=https://www.youtube-nocookie.com/embed/0ic6QK0xUMY class=youtube-embed-frame allowfullscreen title="YouTube Video"></iframe></div><p>For usability purposes, GrapheneOS supports <a href=https://grapheneos.org/usage#sandboxed-google-play>Sandboxed Google Play</a>, which runs Google Play Services fully sandboxed like any other regular app. This means you can take advantage of most Google Play Services, such as <a href=https://firebase.google.com/docs/cloud-messaging/>push notifications</a>, while giving you full control over their permissions and access, and while containing them to a specific work profile or user profile of your choice. Most interestingly, the <a href=https://android-doc.github.io/google/play/billing/api.html>In-app Billing API</a>, <a href=https://play.google.com/googleplaygames>Google Play Games</a>, <a href=https://developer.android.com/guide/playcore/asset-delivery>Play Asset Delivery</a>, <a href=/posts/knowledge/multi-factor-authentication/#fido2-fast-identity-online>FIDO2</a> all work exceptionally well. Most <a href=https://landing.google.com/advancedprotection/>Advanced Protection Program</a> features, except for <a href="https://support.google.com/googleplay/answer/2812853?hl=en">Play Protect</a> and restricted app installation, also work.</p><p>Because GrapheneOS does not grant any Google Apps and Services apart from the opt-in eSIM action app privileged access to the system, Play Protect cannot disable or uninstall known malicious applications when it detects them. As for restricted app installation, this feature is not that useful on stock operating system anyways, since it is bypassable with <code>adb push</code>.</p><p>Recently, GrapheneOS has also added the <a href=https://grapheneos.org/usage#storage-access>Storage Scopes</a> feature, allowing you to force apps that request broad storage access permission to function with scoped storage. With this new feature, you no longer have to grant certain apps access to all of your media or files to use them anymore. You can watch a video of Storage Scope in action here:</p><div class=youtube-embed-div><iframe src=https://www.youtube-nocookie.com/embed/WjrANjvrSzw class=youtube-embed-frame allowfullscreen title="YouTube Video"></iframe></div><p>Currently, Google Pixel phones are the only devices that meet GrapheneOS&rsquo;s <a href=https://grapheneos.org/faq#device-support>hardware security requirements</a>.</p><h3 id=divestos>DivestOS<a hidden class=anchor aria-hidden=true href=#divestos>#</a></h3><p><a href=https://divestos.org/>DivestOS</a> is a great aftermarket operating system for devices that have gone end-of-life or are near end-of-life. Note that this is a harm reduction project, ran by one developer on the best effort basis, and you should not buy a new device just to run DivestOS.</p><p>Being a soft-fork of <a href=https://lineageos.org/>LineageOS</a>, DivestOS inherits many <a href="https://divestos.org/index.php?page=devices&base=LineageOS">supported devices</a> from LineageOS. It has signed builds, making it possible to have <a href=https://source.android.com/security/verifiedboot>verified boot</a> on some non-Pixel devices.</p><p>It comes with substantial hardening over AOSP. DivestOS has automated kernel vulnerability (<a href=https://en.wikipedia.org/wiki/Common_Vulnerabilities_and_Exposures>CVE</a>) <a href=https://gitlab.com/divested-mobile/cve_checker>patching</a>, fewer proprietary blobs, a custom <a href="https://divested.dev/index.php?page=dnsbl">hosts</a> file, and various security features ported from GrapheneOS. A non-exhaustive list of this includes:</p><ul><li>A hardened webview. <a href=https://gitlab.com/divested-mobile/mulch>Mulch</a> comes with <em>some</em> patches from GrapheneOS&rsquo;s Vanadium browser and the <a href=https://github.com/bromite/bromite>Bromite</a> project. It gets updated fairly quickly and do not fall behind nearly as much as Bromite.</li><li>Kernel patches from GrapheneOS and enables all available kernel security features via <a href=https://github.com/Divested-Mobile/DivestOS-Build/blob/master/Scripts/Common/Functions.sh#L758>defconfig hardening</a>. All kernels newer than version 3.4 include full page <a href=https://lwn.net/Articles/334747/>sanitization</a> and all ~22 Clang-compiled kernels have <a href="https://reviews.llvm.org/D54604?id=174471"><code>-ftrivial-auto-var-init=zero</code></a> enabled.</li><li>GrapheneOS&rsquo;s <a href=https://developer.android.com/training/basics/network-ops/connecting><code>INTERNET</code></a> and SENSORS permission toggle.</li><li><a href=https://github.com/GrapheneOS/hardened_malloc>Hardened memory allocator</a></li><li><a href=https://grapheneos.org/usage#exec-spawning>Secure Exec-Spawning</a></li><li>Partial <a href=https://en.wikipedia.org/wiki/Bionic_(software)>bionic</a> hardening patchsets from GrapheneOS</li><li>GrapheneOS&rsquo;s per-network full <a href=https://en.wikipedia.org/wiki/MAC_address#Randomization>MAC randomization</a> option on version 17.1 and higher</li><li>Automatic reboot/Wi-Fi/Bluetooth <a href=https://grapheneos.org/features>timeout options</a></li></ul><p>With that being said, DivestOS is not without its faults. The developer does not have all of the devices he is building for, and for a lot of them he simply publishes the builds blind without actually testing them. Firmware update support <a href=https://gitlab.com/divested-mobile/firmware-empty/-/blob/master/STATUS>varies</a> across devices. DivestOS also takes a very long time to update to a new major Android, and actually took longer than CalyxOS did as mentioned <a href=#firmware-updates>above</a>. It does not tend to fall behind on Chromium updates like CalyxOS, however.</p><p>Also, please note that I am only recommending DivestOS here, and not any of its related apps. For instance, I would not recommend using Mull, since it is just a Firefox Android fork with better defaults and still inherits many security deficiencies from its upstream, including the lack of support for <a href=https://wiki.mozilla.org/Project_Fission>site isolation</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1565196">isolatedProcess</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://privsec.dev/tags/operating-systems/>Operating Systems</a></li><li><a href=https://privsec.dev/tags/android/>Android</a></li><li><a href=https://privsec.dev/tags/privacy/>Privacy</a></li><li><a href=https://privsec.dev/tags/security/>Security</a></li></ul><nav class=paginav><a class=prev href=https://privsec.dev/posts/android/banking-applications-compatibility-with-grapheneos/><span class=title>Â« Prev</span><br><span>Banking Applications Compatibility with GrapheneOS</span></a>
<a class=next href=https://privsec.dev/posts/android/f-droid-security-issues/><span class=title>Next Â»</span><br><span>F-Droid Security Issues</span></a></nav></footer></article></main><footer class=footer><span><a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA 4.0</a></span>
<span>- Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer">Hugo</a> &
        <a href=https://github.com/Wonderfall/hugo-WonderMod/ rel=noopener>WonderMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script defer crossorigin=anonymous src=/assets/js/papermod.7ea300eda6d3653624a576fbc095ccd8a0c2977756acbe5de4114132a72cc7fa.js integrity="sha256-fqMA7abTZTYkpXb7wJXM2KDCl3dWrL5d5BFBMqcsx/o="></script></body></html>